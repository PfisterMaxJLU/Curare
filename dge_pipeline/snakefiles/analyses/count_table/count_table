from os import listdir
from os.path import isfile

rule all:
    input:
        "analysis/count_table/counts.txt"

rule count_reads:
    input:
        expand("mapping/{A}.bam", A=config['entries'].keys())
    output:
        "analysis/count_table/counts.txt"
    threads:
        32
    shell:
        "featureCounts -T 4 %%ADDITIONAL_OPTIONS%% -t '%%GFF_FEATURE_TYPE%%' -g '%%GFF_FEATURE_NAME%%' -a %%GFF_PATH%% -o {output} {input}"
