from os import listdir
from os.path import isfile, dirname

def getPath(file_name):
    for seqRun in config['entries'].values():
            if os.path.basename(seqRun['main']['reads']) == file_name:
                return seqRun['main']['reads']
    print('Cannot find {} in groups file'.format(file_name))

localrules: none__create_symlink

rule create_symlink:
    input:
        lambda wildcards: getPath(wildcards.name)
    output:
        "preprocessing/{name}"
    threads:
        1
    shell:
        "ln -s `readlink -f {input}` {output}"
